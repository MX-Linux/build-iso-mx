=====================================================================
/home/adrian/build-iso-mx/Tools/live-multi-kernel --distro=MX
        program: live-multi-kernel
        started: Wed 04 Jan 2023 08:41:36 PM EST
        version: 0.02.21 (Wed Apr 21 12:19:41 PM MDT 2021)
         kernel: 5.10.102.1-microsoft-standard-WSL2+
             OS: MX 21 (Wildflower)
      found lib: /usr/local/lib/cli-shell-utils/cli-shell-utils.bash
    lib version: 2.41.05 (Tue 05 Nov 2019 08:50:59 PM MST)
---------------------------------------------------------------------

Sourcing config at ./LMK-Template/MX/config
>>>> find kernels
Looking for kernels in iso/antiX/
     First kernel is Modern vmlinuz  version 6.0
    Second kernel is Legacy vmlinuz1 version 5.10
>>>> isolinux bootloader
 > unpack-gfx-cpio -f iso/boot/isolinux/gfx-cpio -d /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio
Unpack: iso/boot/isolinux/gfx-cpio ---> /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio/
 > rm -f /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio/back1024.jpg /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio/back640.jpg /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio/back800.jpg
 > cp -a /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio /tmp/live-multi-kernel-1hLH08/isolinux-cpio
 > cp /tmp/live-multi-kernel-1hLH08/orig-isolinux-cpio/gfxboot.cfg /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
Using template file ./LMK-Template/MX/back800.jpg
 > sed -r -i /^\[800x600/,/^\[640x480/ s/^(mainmenu.pos=).*/\1250,185/ /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
 > sed -r -i /^\[800x600/,/^\[640x480/ s/^(bootopt.pos=).*/\1250,420/ /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
 > convert -pointsize 20 -draw text 250,125 'MX-21.3_KDE_x64 (Wildflower)' -pointsize 18 -draw text 250,155 'released January 18, 2023  (legacy boot)' -fill #CCCCCC ./LMK-Template/MX/back800.jpg /tmp/live-multi-kernel-1hLH08/isolinux-cpio/back800.jpg
 > sed -i -r s/^(nobootoptions=.*)/\1,Use_Legacy_Kernel,Use_Modern_Kernel,Back_to_Top/ /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
 > cp /tmp/live-multi-kernel-1hLH08/gfxboot.cfg /tmp/live-multi-kernel-1hLH08/isolinux-cpio/gfxboot.cfg
  >> isolinux cpio archives
 > sed -i -r s/^(key\.F[3-9])/;-LMK \1/ /tmp/live-multi-kernel-1hLH08/isolinux-cpio/gfxboot.cfg
 > sed -i -r /^key.F2=lang/i key.F1=help /tmp/live-multi-kernel-1hLH08/isolinux-cpio/gfxboot.cfg
 > unpack-gfx-cpio -d /tmp/live-multi-kernel-1hLH08/isolinux-cpio -f iso/boot/isolinux/top-cpio -r
Repack: /tmp/live-multi-kernel-1hLH08/isolinux-cpio/ ---> iso/boot/isolinux/top-cpio
 > cp /tmp/live-multi-kernel-1hLH08/gfxboot.cfg /tmp/live-multi-kernel-1hLH08/isolinux-cpio/gfxboot.cfg
 > convert -pointsize 20 -draw text 250,125 'MX-21.3_KDE_x64 (Wildflower)' -pointsize 18 -draw text 250,155 'Modern 6.0 kernel' -fill #CCCCCC ./LMK-Template/MX/back800.jpg /tmp/live-multi-kernel-1hLH08/isolinux-cpio/back800.jpg
 > unpack-gfx-cpio -d /tmp/live-multi-kernel-1hLH08/isolinux-cpio -f iso/boot/isolinux/gfx-cpio -r
Repack: /tmp/live-multi-kernel-1hLH08/isolinux-cpio/ ---> iso/boot/isolinux/gfx-cpio
 > convert -pointsize 20 -draw text 250,125 'MX-21.3_KDE_x64 (Wildflower)' -pointsize 18 -draw text 250,155 'Legacy 5.10 kernel' -fill #CCCCCC ./LMK-Template/MX/back800.jpg /tmp/live-multi-kernel-1hLH08/isolinux-cpio/back800.jpg
 > unpack-gfx-cpio -d /tmp/live-multi-kernel-1hLH08/isolinux-cpio -f iso/boot/isolinux/gfx1-cpio -r
Repack: /tmp/live-multi-kernel-1hLH08/isolinux-cpio/ ---> iso/boot/isolinux/gfx1-cpio
  >> isolinux config files
 > cp ./LMK-Template/MX/isolinux.cfg iso/boot/isolinux/isolinux.cfg
 > cp ./LMK-Template/MX/kernel0.cfg iso/boot/isolinux/kernel0.cfg
 > cp ./LMK-Template/MX/kernel1.cfg iso/boot/isolinux/kernel1.cfg
 > bootloader-template -s -i --data=Output/bootloader-data --data=/tmp/live-multi-kernel-1hLH08/data-file iso/boot/isolinux/kernel0.cfg iso/boot/isolinux/kernel1.cfg iso/boot/isolinux/isolinux.cfg
file iso/boot/isolinux/kernel0.cfg
file iso/boot/isolinux/kernel1.cfg
file iso/boot/isolinux/isolinux.cfg
>>>> syslinux bootloader
 > unpack-gfx-cpio -f iso/boot/syslinux/gfx-cpio -d /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio
Unpack: iso/boot/syslinux/gfx-cpio ---> /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio/
 > rm -f /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio/back1024.jpg /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio/back640.jpg /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio/back800.jpg
 > cp -a /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio /tmp/live-multi-kernel-1hLH08/syslinux-cpio
 > cp /tmp/live-multi-kernel-1hLH08/orig-syslinux-cpio/gfxboot.cfg /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
Using template file ./LMK-Template/MX/back800.jpg
 > sed -r -i /^\[800x600/,/^\[640x480/ s/^(mainmenu.pos=).*/\1250,185/ /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
 > sed -r -i /^\[800x600/,/^\[640x480/ s/^(bootopt.pos=).*/\1250,420/ /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
 > convert -pointsize 20 -draw text 250,125 'MX-21.3_KDE_x64 (Wildflower)' -pointsize 18 -draw text 250,155 'released January 18, 2023  (legacy boot)' -fill #CCCCCC ./LMK-Template/MX/back800.jpg /tmp/live-multi-kernel-1hLH08/syslinux-cpio/back800.jpg
 > sed -i -r s/^(nobootoptions=.*)/\1,Use_Legacy_Kernel,Use_Modern_Kernel,Back_to_Top/ /tmp/live-multi-kernel-1hLH08/gfxboot.cfg
 > cp /tmp/live-multi-kernel-1hLH08/gfxboot.cfg /tmp/live-multi-kernel-1hLH08/syslinux-cpio/gfxboot.cfg
  >> syslinux cpio archives
 > sed -i -r s/^(key\.F[3-9])/;-LMK \1/ /tmp/live-multi-kernel-1hLH08/syslinux-cpio/gfxboot.cfg
 > sed -i -r /^key.F2=lang/i key.F1=help /tmp/live-multi-kernel-1hLH08/syslinux-cpio/gfxboot.cfg
 > unpack-gfx-cpio -d /tmp/live-multi-kernel-1hLH08/syslinux-cpio -f iso/boot/syslinux/top-cpio -r
Repack: /tmp/live-multi-kernel-1hLH08/syslinux-cpio/ ---> iso/boot/syslinux/top-cpio
 > cp /tmp/live-multi-kernel-1hLH08/gfxboot.cfg /tmp/live-multi-kernel-1hLH08/syslinux-cpio/gfxboot.cfg
 > convert -pointsize 20 -draw text 250,125 'MX-21.3_KDE_x64 (Wildflower)' -pointsize 18 -draw text 250,155 'Modern 6.0 kernel' -fill #CCCCCC ./LMK-Template/MX/back800.jpg /tmp/live-multi-kernel-1hLH08/syslinux-cpio/back800.jpg
 > unpack-gfx-cpio -d /tmp/live-multi-kernel-1hLH08/syslinux-cpio -f iso/boot/syslinux/gfx-cpio -r
Repack: /tmp/live-multi-kernel-1hLH08/syslinux-cpio/ ---> iso/boot/syslinux/gfx-cpio
 > convert -pointsize 20 -draw text 250,125 'MX-21.3_KDE_x64 (Wildflower)' -pointsize 18 -draw text 250,155 'Legacy 5.10 kernel' -fill #CCCCCC ./LMK-Template/MX/back800.jpg /tmp/live-multi-kernel-1hLH08/syslinux-cpio/back800.jpg
 > unpack-gfx-cpio -d /tmp/live-multi-kernel-1hLH08/syslinux-cpio -f iso/boot/syslinux/gfx1-cpio -r
Repack: /tmp/live-multi-kernel-1hLH08/syslinux-cpio/ ---> iso/boot/syslinux/gfx1-cpio
  >> syslinux config files
 > cp ./LMK-Template/MX/syslinux.cfg iso/boot/syslinux/syslinux.cfg
 > cp ./LMK-Template/MX/kernel0.cfg iso/boot/syslinux/kernel0.cfg
 > cp ./LMK-Template/MX/kernel1.cfg iso/boot/syslinux/kernel1.cfg
 > bootloader-template -s -i --data=Output/bootloader-data --data=/tmp/live-multi-kernel-1hLH08/data-file iso/boot/syslinux/kernel0.cfg iso/boot/syslinux/kernel1.cfg iso/boot/syslinux/syslinux.cfg
file iso/boot/syslinux/kernel0.cfg
file iso/boot/syslinux/kernel1.cfg
file iso/boot/syslinux/syslinux.cfg
>>>> grub bootloader
 > cp ./LMK-Template/MX/grub.cfg iso/boot/grub/grub.cfg
 > cp ./LMK-Template/MX/theme.txt iso/boot/grub/theme/
 > bootloader-template -s -i --data=Output/bootloader-data --data=/tmp/live-multi-kernel-1hLH08/data-file iso/boot/grub/grub.cfg iso/boot/grub//theme/bios.txt iso/boot/grub//theme/l10n.txt iso/boot/grub//theme/theme.txt iso/boot/grub//theme/uefisb.txt iso/boot/grub//theme/uefi.txt
file iso/boot/grub/grub.cfg
file iso/boot/grub//theme/bios.txt
file iso/boot/grub//theme/l10n.txt
file iso/boot/grub//theme/theme.txt
file iso/boot/grub//theme/uefisb.txt
file iso/boot/grub//theme/uefi.txt
>>>> initrd add modules
 > unpack-initrd -d /tmp/live-multi-kernel-1hLH08/initrd -f iso/antiX/initrd.gz --quiet
Unpack: iso/antiX/initrd.gz --> /tmp/live-multi-kernel-1hLH08/initrd/
Removing modules for kernel 6.0.0-6mx-amd64
 > rm -r /tmp/live-multi-kernel-1hLH08/initrd/lib/modules/6.0.0-6mx-amd64
  Adding modules for kernel 6.0.0-6mx-amd64
 > copy-initrd-modules --kernel=6.0.0-6mx-amd64 --from=sqfs --to=/tmp/live-multi-kernel-1hLH08/initrd --quiet --encrypt
copy-initrd-modules warning: 2 repeated module(s) in input
libahci
sdhci
  Adding modules for kernel 5.10.0-20-amd64
 > copy-initrd-modules --kernel=5.10.0-20-amd64 --from=sqfs --to=/tmp/live-multi-kernel-1hLH08/initrd --quiet --encrypt
copy-initrd-modules warning: 2 repeated module(s) in input
libahci
sdhci
  Copying files from ./LMK-Template/initrd
 > cp -r ./LMK-Template/initrd/bin /tmp/live-multi-kernel-1hLH08/initrd/
 > unpack-initrd -d /tmp/live-multi-kernel-1hLH08/initrd -f iso/antiX/initrd.gz -r --quiet
Repack: /tmp/live-multi-kernel-1hLH08/initrd/ --> iso/antiX/initrd.gz
